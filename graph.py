from mpl_toolkits.mplot3d import Axes3D
from matplotlib import cm, tri
import matplotlib.cm as cmx
from matplotlib.ticker import LinearLocator, FormatStrFormatter
import matplotlib.pyplot as plt
import numpy as np
import matplotlib.colors as mcolors
from random import randint
import matplotlib


results = {(0.1, 0.1): [None, None, 0.0],(0.1, 0.2): [None, None, 0.0],(0.1, 0.3): [None, None, 0.0],
			(0.1, 0.4): [None, None, 0.0],(0.1, 0.5): [None, None, 0.0],(0.1, 0.6): [None, None, 0.0],
			(0.1, 0.7): [None, None, 0.0],(0.1, 0.8): [None, None, 0.0],(0.1, 0.9): [None, None, 0.0],
 			(0.2, 0.1): [None, None, 0.0],(0.2, 0.2): [6.078829050064087, 26.0, 5.0],(0.2, 0.3): [None, None, 0.0],
 			(0.2, 0.4): [7.466248989105225, 32.0, 5.0],(0.2, 0.5): [None, None, 0.0],(0.2, 0.6): [None, None, 0.0],
 			(0.2, 0.7): [6.412201881408691, 27.0, 5.0],(0.2, 0.8): [9.794116020202637, 42.0, 5.0],(0.2, 0.9): [7.8706849416097, 33.333333333333336, 15.0],
 			(0.3, 0.1): [6.969986915588379, 33.0, 5.0],(0.3, 0.2): [7.968897819519043, 38.0, 5.0],(0.3, 0.3): [7.776937007904053, 37.0, 5.0],
 			(0.3, 0.4): [None, None, 0.0],(0.3, 0.5): [8.44383156299591, 36.0, 10.0],(0.3, 0.6): [7.5114991664886475, 35.0, 5.0],
 			(0.3, 0.7): [None, None, 0.0],(0.3, 0.8): [10.180238127708435, 41.5, 10.0],(0.3, 0.9): [8.332481861114502, 36.0, 5.0],
 			(0.4, 0.1): [7.143688917160034, 35.0, 5.0],(0.4, 0.2): [14.779446959495544, 39.5, 10.0],(0.4, 0.3): [10.445657968521118, 43.0, 5.0],
 			(0.4, 0.4): [9.639094471931458, 44.5, 10.0],(0.4, 0.5): [11.952765941619873, 55.5, 10.0],(0.4, 0.6): [10.056158208847046, 49.2, 25.0],
 			(0.4, 0.7): [12.014901995658875, 52.5, 10.0],(0.4, 0.8): [10.480436046918234, 48.5, 30.0],(0.4, 0.9): [11.615543802579245, 53.833333333333336, 30.0],
 			(0.5, 0.1): [10.724012732505798, 54.0, 20.0],(0.5, 0.2): [17.049330949783325, 78.0, 5.0],(0.5, 0.3): [None, None, 0.0],
 			(0.5, 0.4): [18.46089804172516, 59.0, 10.0],(0.5, 0.5): [None, None, 0.0],(0.5, 0.6): [None, None, 0.0],
 			(0.5, 0.7): [13.488142490386963, 70.25, 20.0],(0.5, 0.8): [11.49649715423584, 62.0, 5.0],(0.5, 0.9): [21.767264127731323, 60.0, 10.0],
 			(0.6, 0.1): [11.452900886535645, 76.0, 5.0],(0.6, 0.2): [11.57039999961853, 77.0, 5.0],(0.6, 0.3): [10.986680030822754, 71.0, 15.0],
	 		(0.6, 0.4): [11.11305503845215, 73.0, 25.0],(0.6, 0.5): [None, None, 0.0],(0.6, 0.6): [14.153853178024292, 83.75, 20.0],
	 		(0.6, 0.7): [13.726669490337372, 80.75, 20.0],(0.6, 0.8): [19.996260325113933, 92.33333333333333, 15.0],(0.6, 0.9): [20.53678923845291, 122.75, 20.0],
	 		(0.7, 0.1): [14.552778005599976, 108.0, 5.0],(0.7, 0.2): [14.141077041625977, 91.0, 10.0],(0.7, 0.3): [15.440789520740509, 100.75, 20.0],
	 		(0.7, 0.4): [19.18312907218933, 106.0, 10.0],(0.7, 0.5): [None, None, 0.0],(0.7, 0.6): [16.59666085243225, 126.0, 5.0],
	 		(0.7, 0.7): [18.163389086723328, 121.0, 10.0],(0.7, 0.8): [18.53859394788742, 133.5, 20.0],(0.7, 0.9): [22.01453399658203, 161.25, 20.0],
	 		(0.8, 0.1): [19.9285151163737, 172.66666666666666, 15.0],(0.8, 0.2): [16.69041363398234, 160.5, 30.0],(0.8, 0.3): [16.967396020889282, 165.0, 5.0],
	 		(0.8, 0.4): [18.044135808944702, 175.33333333333334, 15.0],(0.8, 0.5): [25.108930349349976, 225.5, 10.0],(0.8, 0.6): [27.118082523345947, 212.0, 10.0],
	 		(0.8, 0.7): [27.367459416389465, 203.8, 5.0],(0.8, 0.8): [30.32737946510315, 230.0, 10.0],(0.8, 0.9): [26.227857160568238, 251.2, 25.0],
	 		(0.9, 0.1): [27.774805068969727, 327.5, 10.0],(0.9, 0.2): [26.993949604034423, 327.6, 25.0],(0.9, 0.3): [29.250583457946778, 355.4, 25.0],
	 		(0.9, 0.4): [29.243789593378704, 352.6666666666667, 15.0],(0.9, 0.5): [37.57149398326874, 387.0, 10.0],(0.9, 0.6): [34.64001803398132, 423.8, 25.0],
	 		(0.9, 0.7): [33.495464503765106, 406.75, 20.0],(0.9, 0.8): [33.75952251752218, 406.6666666666667, 30.0],(0.9, 0.9): [41.05450957162039, 488.14285714285717, 35.0]}
"""
results = {(0.1, 0.1): [49.479350328445435, 15.454545454545455, 55.00000000000001],
 (0.1, 0.2): [53.64248759929951, 16.76923076923077, 65.0],
 (0.1, 0.3): [49.32514674846943, 16.615384615384617, 65.0],
 (0.1, 0.4): [48.89582633972168, 17.8, 75.0],
 (0.1, 0.5): [45.61457924842834, 16.8, 75.0],
 (0.1, 0.6): [47.73177550236384, 17.333333333333332, 60.0],
 (0.1, 0.7): [51.161915932382854, 18.714285714285715, 70.0],
 (0.1, 0.8): [48.71454642035744, 17.818181818181817, 55.00000000000001],
 (0.1, 0.9): [52.193727801827826, 19.11764705882353, 85.0],
 (0.2, 0.1): [52.11666674362986, 21.210526315789473, 95.0],
 (0.2, 0.2): [55.036731017263314, 22.36842105263158, 95.0],
 (0.2, 0.3): [56.091711600621544, 22.666666666666668, 90.0],
 (0.2, 0.4): [56.90825311761154, 22.94736842105263, 95.0],
 (0.2, 0.5): [56.77427076038561, 22.842105263157894, 95.0],
 (0.2, 0.6): [59.66652474905315, 24.0, 95.0],
 (0.2, 0.7): [59.09542644725126, 23.823529411764707, 85.0],
 (0.2, 0.8): [60.13090429807964, 23.894736842105264, 95.0],
 (0.2, 0.9): [64.40981347937333, 25.736842105263158, 95.0],
 (0.3, 0.1): [61.5928393734826, 27.61111111111111, 90.0],
 (0.3, 0.2): [60.91226037740707, 27.25, 100.0],
 (0.3, 0.3): [62.55767532587051, 27.95, 100.0],
 (0.3, 0.4): [65.87297911942005, 29.375, 80.0],
 (0.3, 0.5): [66.83315427163068, 29.352941176470587, 85.0],
 (0.3, 0.6): [79.25874813865212, 29.470588235294116, 85.0],
 (0.3, 0.7): [79.03612072467804, 30.75, 100.0],
 (0.3, 0.8): [75.74923423716896, 31.42105263157895, 95.0],
 (0.3, 0.9): [95.84512405395508, 32.4, 100.0],
 (0.4, 0.1): [87.00308500528335, 35.25, 100.0],
 (0.4, 0.2): [84.54161773787604, 35.388888888888886, 90.0],
 (0.4, 0.3): [87.26431880499187, 36.8421052631579, 95.0],
 (0.4, 0.4): [89.70623930692673, 37.75, 100.0],
 (0.4, 0.5): [91.91133989228143, 39.27777777777778, 90.0],
 (0.4, 0.6): [115.6798793554306, 40.0, 100.0],
 (0.4, 0.7): [136.73582486102455, 39.21052631578947, 95.0],
 (0.4, 0.8): [94.58089179992676, 40.65, 100.0],
 (0.4, 0.9): [106.18704948425292, 44.45, 100.0],
 (0.5, 0.1): [101.40566009283066, 45.55, 100.0],
 (0.5, 0.2): [85.16322951846652, 46.666666666666664, 90.0],
 (0.5, 0.3): [161.23951550722123, 48.05, 100.0],
 (0.5, 0.4): [101.88582323789596, 48.45, 100.0],
 (0.5, 0.5): [98.08406539967186, 48.73684210526316, 95.0],
 (0.5, 0.6): [102.73991963863372, 51.1, 100.0],
 (0.5, 0.7): [107.28100955486298, 52.6, 100.0],
 (0.5, 0.8): [114.82615711814479, 56.26315789473684, 95.0],
 (0.5, 0.9): [118.0057000875473, 57.7, 100.0],
 (0.6, 0.1): [95.93918820619584, 61.3, 100.0],
 (0.6, 0.2): [102.28581461153533, 60.63157894736842, 95.0],
 (0.6, 0.3): [118.45169919729233, 62.0, 100.0],
 (0.6, 0.4): [107.14620305299759, 67.45, 100.0],
 (0.6, 0.5): [103.24314957857132, 65.65, 100.0],
 (0.6, 0.6): [113.30276371303357, 69.47368421052632, 95.0],
 (0.6, 0.7): [109.92196643979926, 70.42105263157895, 95.0],
 (0.6, 0.8): [116.21268953775105, 74.52631578947368, 95.0],
 (0.6, 0.9): [119.71007525920868, 77.3, 100.0],
 (0.7, 0.1): [112.05635784864425, 85.6, 100.0],
 (0.7, 0.2): [117.5880920510543, 89.73684210526316, 95.0],
 (0.7, 0.3): [118.3511445403099, 90.25, 100.0],
 (0.7, 0.4): [121.33034529685975, 92.3, 100.0],
 (0.7, 0.5): [125.1637561917305, 95.0, 100.0],
 (0.7, 0.6): [128.4815703868866, 97.3, 100.0],
 (0.7, 0.7): [133.3572210431099, 100.95, 100.0],
 (0.7, 0.8): [140.1259957909584, 106.05, 100.0],
 (0.7, 0.9): [144.68982011079788, 108.15, 100.0],
 (0.8, 0.1): [195.23081095218657, 136.3, 100.0],
 (0.8, 0.2): [191.49424451589584, 141.85, 100.0],
 (0.8, 0.3): [200.18290088051245, 141.78947368421052, 95.0],
 (0.8, 0.4): [171.14484177827836, 144.6, 100.0],
 (0.8, 0.5): [182.33197458982468, 153.35, 100.0],
 (0.8, 0.6): [224.27153389077438, 156.26315789473685, 95.0],
 (0.8, 0.7): [218.95163458272032, 161.52631578947367, 95.0],
 (0.8, 0.8): [224.49302134248944, 169.27777777777777, 90.0],
 (0.8, 0.9): [228.76855556170145, 174.77777777777777, 90.0],
 (0.9, 0.1): [265.44673315684, 281.93333333333334, 75.0],
 (0.9, 0.2): [289.484486413002, 289.9, 50.0],
 (0.9, 0.3): [260.8356037790125, 293.72727272727275, 55.00000000000001],
 (0.9, 0.4): [288.32463673182895, 303.14285714285717, 35.0],
 (0.9, 0.5): [298.33477929234505, 303.375, 40.0],
 (0.9, 0.6): [295.41167852282524, 318.5, 40.0],
 (0.9, 0.7): [293.3077158331871, 324.875, 40.0],
 (0.9, 0.8): [388.57039999961853, 342.0, 15.0],
 (0.9, 0.9): [316.4657814502716, 344.5, 10.0]}
"""

ratios = []
probs = []
iterations = []
times = []
percents = []


for i in range(len(results)):
	ratios.append(list(sorted(results.keys()))[i][0])
	probs.append(list(sorted(results.keys()))[i][1])
	times.append(results[(ratios[i], probs[i])][0])
	iterations.append(results[(ratios[i], probs[i])][1])
	percents.append(results[(ratios[i], probs[i])][2])
	

looper = len(times)
count = 0
while count < looper:
	if times[count] == None:
		ratios.pop(count)
		probs.pop(count)
		iterations.pop(count)
		times.pop(count)
		percents.pop(count)
		looper -= 1
		count -= 1
	count += 1

ixyz = np.array([ratios,probs,iterations])

ix=ixyz[0]
iy=ixyz[1]
iz=ixyz[2]

txyz = np.array([ratios,probs,times])

tx=txyz[0]
ty=txyz[1]
tz=txyz[2]

percents = np.array(percents)

# do colours
cNorm = matplotlib.colors.Normalize(vmin=0, vmax=100)
scalarMap = cmx.ScalarMappable(norm=cNorm, cmap=plt.cm.jet)
scalarMap.set_array(percents)

fig1 = plt.figure()
ax = fig1.add_subplot(1,1,1,projection='3d')
ax.set_title('Figure 1: 10 000 population size performance', y=-1000)
fig1.colorbar(scalarMap, shrink=0.75, aspect=10).set_label('Success Rate (%)')

iGraph = ax.scatter(ix, iy, iz, c=scalarMap.to_rgba(percents), edgecolors=scalarMap.to_rgba(percents,alpha=None))
ax.set_xlabel('Parent to Child Ratio')
ax.set_ylabel('Mutation Probability')
ax.set_zlabel('Iterations')


fig2 = plt.figure()
ax = fig2.add_subplot(1,1,1,projection='3d')
ax.set_title('Figure 1: 10 000 population size time taken', y=-500)
fig2.colorbar(scalarMap, shrink=0.75, aspect=10).set_label('Success Rate (%)')

tGraph = ax.scatter(ix, iy, tz, c=scalarMap.to_rgba(percents), edgecolors=scalarMap.to_rgba(percents))
ax.set_xlabel('Parent to Child Ratio')
ax.set_ylabel('Mutation Probability')
ax.set_zlabel('Time Taken (s)')



plt.show()
